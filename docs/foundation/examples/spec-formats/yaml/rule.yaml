rule: order_pricing

inputs:
  subtotal: number
  customerType: [REGULAR, PREMIUM]

logic:
  discount:
    when:
      customerType: PREMIUM
    value: subtotal * 0.10
    otherwise: 0

  tax: (subtotal - discount) * 0.08
  total: subtotal - discount + tax
